{
    "$schema": "http://json-schema.org/draft-07/schema",
    "definitions": {
        "node": {
            "title": "One Sequence node",
            "description": "Represents a single node in a sequence diagramm",
            "type": "object",
            "properties": {
                "id": {
                    "type": "string"
                },
                "type": {
                    "type": "string",
                    "const": "Node"
                },
                "nodeName": {
                    "type": "string"
                },
                "children": {
                    "type": "array",
                    "items": {
                        "title": "ID of another node",
                        "type": "string"
                    }
                },
                "instance": {
                    "type": "array",
                    "items": {
                        "region": {
                            "type": "array",
                            "items": {
                                "id": {
                                    "type": "string"
                                },
                                "cost": {
                                    "type": "float"
                                },
                                "reliability": {
                                    "type": "float"
                                },
                                "currency": {
                                    "type": "string"
                                },
                                "unit": {
                                    "type": "string"
                                }

                            }

                        }
                    }
                },
                "attr": {
                    "type": "object",
                    "patternProperties": {
                        "^[a-z\\_]+$": {
                            "$ref": "#/definitions/attribute"
                        }
                    }
                }
            },
            "required": [
                "id",
                "img",
                "type",
                "children",
                "nodeName"
            ]
        },
        "template": {
            "title": "A template with multiple node ids",
            "description": "Represents a composition of nodes",
            "type": "object",
            "properties": {
                "id": {
                    "type": "string"
                },
                "type": {
                    "type": "string",
                    "const": "Template"
                },
                "name": {
                    "type": "string"
                },
                "img": {
                    "title": "Relative path of the image source",
                    "type": "string"
                },
                "components": {
                    "type": "array",
                    "items": {
                        "title": "Represents a node",
                        "type": "object",
                        "properties": {
                            "id": {
                                "title": "ID of a Node already existing",
                                "type": "string"
                            },
                            "minOccurence": {
                                "title": "Minimum occurences of this node in the template",
                                "type": "integer",
                                "minimum": 0,
                                "maximum": 99
                            },
                            "maxOccurence": {
                                "title": "Maximum occurences of this node in the template",
                                "type": "integer",
                                "minimum": 1,
                                "maximum": 99
                            }
                        },
                        "required": [
                            "id",
                            "minOccurence",
                            "maxOccurence"
                        ]
                    }
                }
            },
            "required": [
                "id",
                "img",
                "type",
                "components",
                "name"
            ]
        },
        "edgeExclude": {
            "title": "Edge between Nodes that are not allowed",
            "description": "Represents a single edge between nodes",
            "type": "object",
            "properties": {
                "id": {
                    "type": "string"
                },
                "type": {
                    "type": "string",
                    "const": "Edge"
                },
                "name": {
                    "type": "string"
                },
                "exclude": {
                    "type": "array",
                    "items": {
                        "title": "Represents a pair of two node IDs",
                        "type": "object",
                        "properties": {
                            "from": {
                                "title": "ID of the start node for the edge ",
                                "type": "string"
                            },
                            "to": {
                                "title": "ID of the end node for the edge",
                                "type": "string"
                            }
                        }
                    }
                },
                "attr": {
                    "type": "object",
                    "patternProperties": {
                        "^[a-z\\_]+$": {
                            "$ref": "#/definitions/attribute"
                        }
                    }
                }
            },
            "required": [
                "id",
                "type",
                "name",
                "exclude"
            ],
            "not": {
                "required": [
                    "allowed"
                ]
            }
        },
        "edgeAllowed": {
            "title": "Edge between Nodes that are allowed",
            "description": "Represents a single edge between nodes",
            "type": "object",
            "properties": {
                "id": {
                    "type": "string"
                },
                "type": {
                    "type": "string",
                    "const": "Edge"
                },
                "name": {
                    "type": "string"
                },
                "allowed": {
                    "type": "array",
                    "items": {
                        "title": "Represents a pair of two node IDs",
                        "type": "object",
                        "properties": {
                            "from": {
                                "title": "ID of the start node for the edge ",
                                "type": "string"
                            },
                            "to": {
                                "title": "ID of the end node for the edge",
                                "type": "string"
                            }
                        }
                    }
                },
                "attr": {
                    "type": "object",
                    "patternProperties": {
                        "^[a-z\\_]+$": {
                            "$ref": "#/definitions/attribute"
                        }
                    }
                }
            },
            "required": [
                "id",
                "type",
                "name",
                "allowed"
            ],
            "not": {
                "required": [
                    "exclude"
                ]
            }
        },
        "attribute": {
            "title": "One Attribute of a Object",
            "description": "Represents a single attribute of an Object",
            "type": "object",
            "properties": {
                "name": {
                    "type": "string"
                },
                "type": {
                    "type": "string",
                    "enum": [
                        "boolean",
                        "number",
                        "integer",
                        "string",
                        "array",
                        "object"
                    ]
                },
                "value": {
                    "type": [
                        "boolean",
                        "number",
                        "integer",
                        "string",
                        "array",
                        "object"
                    ]
                },
                "writable":{
                    "type": "boolean"
                }
            },
            "required": [
                "name",
                "type",
                "value"
            ]
        }
    },
    "items": {
        "anyOf": [
            {
                "$ref": "#/definitions/node"
            },
            {
                "$ref": "#/definitions/template"
            },
            {
                "$ref": "#/definitions/edgeExclude"
            },
            {
                "$ref": "#/definitions/edgeAllowed"
            }
        ]
    }
}
